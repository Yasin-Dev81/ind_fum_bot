# models process

## internal-wallet
### income
- یک ترنزاکشن در تیبل ولت ترنزاکشن ساخته میشود
- status = False
- پراسس اسکجول شده هر 2 دقیقه یکبار چک میکند واریز شده یا خیر
- درصورت واریز موفقیت آمیز: status = True
- اگر یکساعت از تایم ساخت ترنزاکشن گذشته باشد و واریز موفقیت آمیز نشده باشد، از تیبل حذف میشود
### outcome
- تخفیف اعمال میشود
- اگر به اندازه‌ی کافی در ولت باشد ترنزاکشن در تیبل ولت و کانفیگ ساخته میشود
- status = True

## coinos
### income
- یک ترنزاکشن در تیبل ولت ترنزاکشن ساخته میشود (فرض بر این است که تخفیف اعمال شده است)
- status = False
- پراسس اسکجول شده هر 2 دقیقه یکبار چک میکند واریز شده یا خیر
- درصورت واریز موفقیت آمیز: status = True
- اگر یکساعت از تایم ساخت ترنزاکشن گذشته باشد و واریز موفقیت آمیز نشده باشد، از تیبل حذف میشود

### outcome
- تخفیف اعمال میشود
- ترنزاکشن در تیبل کانفیگ ساخته میشود بدون کانفیگ و ولت ترنزاکشن
- فرایند income انجام میشود
- پراسس اسکجول شده هر 2 دقیقه یکبار چک میکند چقدر پول در ولت هست، اگر به اندازه‌ی کافی پول واریز شد کانفیگ ساخته میشود(یک ترنزاکشن در ولت ساخته شده و یک کانفیگ نیز ساخته میشود)
- کانفیگ ترنزاکشن آپدیت میشود
- اگر یکساعت از تایم ساخت ترنزاکشن گذشته باشد و واریز موفقیت آمیز نشده باشد، از تیبل حذف میشود

## card
### income
- ولت ترنزاکشن توسط ادمین ساخته میشود

### outcome
- تخفیف اعمال میشود
- ترنزاکشن در تیبل کانفیگ ساخته میشود بدون کانفیگ
- فرایند income انجام میشود
- کانفیگ بصورت دستی ساخته میشود


# trigers
## wallet-transaction
- هر زمان که ردیفی ساخته شد یا آپدیت شد
- چک شود که status چیست؟
- status = True: در تیبل یوزر ستون ولت اعمال شود
- status = False: pass

## config
- هر زمان که ردیفی آپدیت شد
- چک شود که status چیست؟
- status = True: کانفیگ در مرزبان ساخته شود و لینک به کاربر ارسال شود.
- status = False: pass
